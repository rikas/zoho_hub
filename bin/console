#!/usr/bin/env ruby
# frozen_string_literal: true

require 'bundler/setup'
require 'zoho_hub'

require 'dotenv'
Dotenv.load

ZohoHub.configure do |config|
  config.client_id = ENV.fetch('ZOHO_CLIENT_ID')
  config.secret = ENV.fetch('ZOHO_SECRET')
  config.redirect_uri = ENV.fetch('ZOHO_OAUTH_REDIRECT_URL')
  config.debug = true
end

token_params = ZohoHub::Auth.refresh_token(ENV.fetch('ZOHO_REFRESH_TOKEN'))
ZohoHub.setup_connection(token_params)

self.send(:include, ZohoHub)

require 'pry'
Pry.start
